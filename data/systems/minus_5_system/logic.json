{
  "system_id": "minus_5_system",
  "system_name": "Minus 5 System",
  "role": "track_selection_only",

  "track_selection": {
    "strategy": "constant_line_relative_position",
    "snap_tolerance": 0.02,

    "rules": [
      {
        "id": "B2T_R",
        "condition": {
          "CO": { "rail": "BOTTOM" },
          "1C": { "rail": "TOP" },
          "3C": { "rail": "BOTTOM" },
          "relative": "CO_x < 3C_x"
        },
        "result": "B2T_R"
      },
      {
        "id": "B2T_L",
        "condition": {
          "CO": { "rail": "BOTTOM" },
          "1C": { "rail": "TOP" },
          "3C": { "rail": "BOTTOM" },
          "relative": "CO_x > 3C_x"
        },
        "result": "B2T_L"
      },
      {
        "id": "T2B_R",
        "condition": {
          "CO": { "rail": "TOP" },
          "1C": { "rail": "BOTTOM" },
          "3C": { "rail": "TOP" },
          "relative": "CO_x > 3C_x"
        },
        "result": "T2B_R"
      },
      {
        "id": "T2B_L",
        "condition": {
          "CO": { "rail": "TOP" },
          "1C": { "rail": "BOTTOM" },
          "3C": { "rail": "TOP" },
          "relative": "CO_x < 3C_x"
        },
        "result": "T2B_L"
      }
    ],

    "fallback": {
      "policy": "error",
      "message": "Unable to resolve track: CO, 1C, 3C must be on expected constant rails."
    },

    "source_reference": "Minus_5_system_track_selector.py"
  },

  "required_marks": ["CO", "1C", "3C"],

  "input_validation": {
    "rail_required": true,
    "axis_required": true,
    "error_on_missing": true,
    "error_messages": {
      "missing_CO": "CO 입력이 필요합니다.",
      "missing_1C": "1C 입력이 필요합니다.",
      "missing_3C": "3C 입력이 필요합니다.",
      "invalid_position": "CO, 1C, 3C는 지정된 레일 상수선에 있어야 합니다."
    }
  },

  "notes": {
    "ko": [
      "logic.json은 트랙 선택만 담당합니다.",
      "Minus 5 시스템은 CO와 3C의 상대 위치로 좌우 트랙을 결정합니다.",
      "계산 공식은 derivations/minus_5_system.rules.json에서만 수행됩니다."
    ]
  },

  "meta": {
    "spec_version": "v1.3",
    "generator": "3Cushion AI (PM)",
    "no_calc_in_logic": true,
    "last_updated": "2026-01-11",
    "source": "Minus_5_system_track_selector.py"
  }
}
